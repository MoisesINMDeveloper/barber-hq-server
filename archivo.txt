ğŸ“˜ DocumentaciÃ³n del Sistema de GestiÃ³n de Citas para BarberÃ­as
ğŸ“Œ IntroducciÃ³n
Este sistema permite a los clientes agendar citas con barberos sin necesidad de registrarse, identificÃ¡ndose solo con su nombre y nÃºmero de telÃ©fono. Los administradores pueden gestionar pagos, citas y solicitudes de retiro de los barberos. AdemÃ¡s, cada barbero cuenta con su propio catÃ¡logo de cortes de cabello con precios e imÃ¡genes.

ğŸ—‚ï¸ Base de Datos - Esquema Prisma
ğŸ“Œ Estructura General
ğŸ“Œ El sistema se basa en los siguientes modelos:

Appointment â†’ Citas de los clientes con barberos.
Payment â†’ GestiÃ³n de pagos de las citas.
Review â†’ Calificaciones y comentarios de los clientes sobre los barberos.
WithdrawalRequest â†’ Solicitudes de retiro de dinero de los barberos.
Haircut â†’ CatÃ¡logo de cortes de cabello de cada barbero.
User â†’ Barberos y administradores.
Availability â†’ Horarios disponibles de los barberos.
Discount â†’ Descuentos para clientes recurrentes.
Barbershop â†’ Datos de la barberÃ­a y sus barberos.
ğŸ“‘ Modelos de Datos (Esquema Prisma)
ğŸ“Œ Appointment (Citas)
Gestiona las citas agendadas por los clientes.
ğŸ“Œ Relacionado con: User (barbero), Haircut, Payment, Review.

prisma
Copiar
Editar
model Appointment {
  id         String   @id @default(uuid())
  clientName String  
  phone      String  
  barberId   String  
  barber     User     @relation(fields: [barberId], references: [id])
  date       DateTime
  status     Status   @default(PENDING)
  haircutId  String?  
  haircut    Haircut? @relation(fields: [haircutId], references: [id])
  paymentId  String?  
  payment    Payment? @relation(fields: [paymentId], references: [id])
  review     Review?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}
ğŸ“Œ Estados posibles:

PENDING: Cita pendiente.
CONFIRMED: Confirmada por el administrador.
CANCELED: Cancelada.
ğŸ“Œ Payment (Pagos)
Maneja los pagos de las citas.

prisma
Copiar
Editar
model Payment {
  id          String   @id @default(uuid())
  appointmentId String @unique
  appointment Appointment @relation(fields: [appointmentId], references: [id])
  amount      Float
  method      PaymentMethod 
  status      PaymentStatus @default(PENDING)
  verifiedBy  String?  
  admin       User?    @relation(fields: [verifiedBy], references: [id])
  createdAt   DateTime @default(now())
}
ğŸ“Œ MÃ©todos de pago: CASH, CARD, TRANSFER.
ğŸ“Œ Estados: PENDING, APPROVED, REJECTED.

ğŸ“Œ Review (ReseÃ±as)
Registra las calificaciones y comentarios de los clientes sobre los barberos.

prisma
Copiar
Editar
model Review {
  id          String   @id @default(uuid())
  phone       String  
  appointmentId String @unique
  appointment Appointment @relation(fields: [appointmentId], references: [id])
  barberId    String
  barber      User     @relation(fields: [barberId], references: [id])
  rating      Int      
  comment     String?
  createdAt   DateTime @default(now())
}
ğŸ“Œ CalificaciÃ³n: Escala del 0 al 5.

ğŸ“Œ WithdrawalRequest (Solicitudes de Retiro)
Gestiona los retiros de los barberos.

prisma
Copiar
Editar
model WithdrawalRequest {
  id          String   @id @default(uuid())
  barberId    String
  barber      User     @relation(fields: [barberId], references: [id])
  amount      Float
  status      WithdrawalStatus @default(PENDING)
  processedBy String?  
  admin       User?    @relation(fields: [processedBy], references: [id])
  createdAt   DateTime @default(now())
}
ğŸ“Œ Estados: PENDING, APPROVED, REJECTED.

ğŸ“Œ Haircut (Cortes de Cabello)
Cada barbero tiene su propio catÃ¡logo de cortes con imÃ¡genes y precios.

prisma
Copiar
Editar
model Haircut {
  id          String   @id @default(uuid())
  name        String
  price       Float
  description String?
  imageUrl    String?
  barberId    String  
  barber      User     @relation(fields: [barberId], references: [id])
  appointments Appointment[]
}
ğŸ“Œ User (Usuarios: Barberos y Administradores)
Los barberos pueden gestionar citas, pagos y retirar sus ingresos.

prisma
Copiar
Editar
model User {
  id          String   @id @default(uuid())
  name        String
  email       String?  @unique
  password    String?
  role        Role     @default(BARBER)
  phone       String?  @unique
  bankName    String?  
  bankCode    String?  
  bankAccount String?  
  nationalId  String?  
  haircuts    Haircut[]  
  appointments Appointment[]
  reviews     Review[]
  payments    Payment[]
  withdrawals WithdrawalRequest[]
}
ğŸ“Œ Roles:

ADMIN: Gestiona el sistema.
BARBER: Atiende a los clientes.
ğŸ“Œ Availability (Disponibilidad de Barberos)
Cada barbero establece su horario de atenciÃ³n.

prisma
Copiar
Editar
model Availability {
  id        String   @id @default(uuid())
  barberId  String   
  barber    User     @relation(fields: [barberId], references: [id])
  day       String   
  startTime String   
  endTime   String   
  createdAt DateTime @default(now())
}
ğŸ“Œ Discount (Descuentos)
Se aplican descuentos a clientes frecuentes.

prisma
Copiar
Editar
model Discount {
  id        String  @id @default(uuid())
  phone     String  
  type      String  
  amount    Float   
  isUsed    Boolean @default(false)
  createdAt DateTime @default(now())
}
ğŸ“Œ Barbershop (BarberÃ­as)
Si hay mÃºltiples barberÃ­as, cada una puede administrar sus propios barberos.

prisma
Copiar
Editar
model Barbershop {
  id        String   @id @default(uuid())
  name      String
  address   String
  phone     String
  barbers   User[]
}
ğŸ“Š Flujo del Sistema
1ï¸âƒ£ Cliente agenda una cita
El cliente elige un barbero y un corte de su catÃ¡logo.
Ingresa su nombre y telÃ©fono.
Selecciona fecha y hora.
Se envÃ­a una notificaciÃ³n al administrador.
2ï¸âƒ£ Pago de la cita
El cliente paga en efectivo, tarjeta o transferencia.
El administrador verifica el pago y lo aprueba.
La cita se confirma y se bloquea en el calendario.
3ï¸âƒ£ EvaluaciÃ³n del servicio
DespuÃ©s del corte, el cliente califica al barbero (0-5 estrellas).
Puede dejar un comentario opcional.
4ï¸âƒ£ Retiro de dinero del barbero
El barbero solicita el retiro de sus ingresos.
El administrador aprueba o rechaza la solicitud.
El dinero se transfiere a la cuenta del barbero.
ğŸš€ ConclusiÃ³n
âœ… Esquema bien optimizado con Prisma.
âœ… Flujo de trabajo claro y automatizado.
âœ… Base sÃ³lida para integrar Express y React Native.

Si necesitas ajustes, dime y lo refinamos. Â¡Listo para empezar! ğŸš€